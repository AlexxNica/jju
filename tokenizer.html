<!DOCTYPE html><html><head><!--link(rel='stylesheet', href='https://netdna.bootstrapcdn.com/bootstrap/3.1.0/css/bootstrap.min.css')--><link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"><style>textarea { font-family: monospace; }
tr.data:hover { cursor: pointer }
.forkme { position: absolute; top: 0; right: 0; border: 0; z-index: 1 }</style><script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script><script src="https://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script><script src="jju.js"></script><script>var jju = require('jju')

$(function() {
 on_textarea_update()
 $('textarea').keyup(function() {
  setTimeout(on_textarea_update, 1)
 })
})

$.fn.selectRange = function(start, end) {
 return this.each(function() {
  if (this.setSelectionRange) {
   this.focus()
   this.setSelectionRange(start, end)
  } else if (this.createTextRange) {
   var range = this.createTextRange()
   range.collapse(true)
   range.moveEnd('character', end)
   range.moveStart('character', start)
   range.select()
  }
 })
}

function on_textarea_update() {
 try {
  var tokens = jju.tokenize($('textarea').val())
 } catch(err) {
  return console.log(err)
 }
 
 function tr(html) {
  return '<tr class="data">' + html + '</tr>'
 }
 
 function td(text) {
  var node = $('<td>')
  node.text(text)
  return node[0].outerHTML
 }
 
 $('#tokens .data').remove()
 
 var position = 0
 for (var i=0; i<tokens.length; i++) {
  var row = $(tr(
   td(position) +
   td(tokens[i].type) +
   td(tokens[i].value) +
   td(tokens[i].raw) +
   td(tokens[i].stack)
  ))
  $('#tokens').append(row)
  
  !function(start, end) {
   row.click(function() {
    $('textarea').selectRange(start, end)
   })
  }(position, position + tokens[i].raw.length)
  
  position += tokens[i].raw.length
 }
}</script><body><nav role="navigation" class="navbar navbar-default"><div class="container-fluid"><div class="collapse navbar-collapse"><ul class="nav navbar-nav"><li><a href="index.html">Home</a></li><li><a href="readme.html">Readme</a></li><li><a href="editor.html">Demo - Editor</a></li><li class="active"><a href="tokenizer.html">Demo - Tokenizer</a></li></ul></div></div></nav><div class="container"><div class="row"><div class="col-md-6"><table id="tokens" class="table table-hover table-condensed"><tr><th>Pos</th><th>Type</th><th>Value</th><th>Raw</th><th>Stack</th></tr></table></div><div class="col-md-6"><form role="form"><div class="form-group"><div class="col-sm-12"><label for="textarea" class="control-label">Copy-paste your package.json here:</label></div><div class="col-sm-12"><textarea id="textarea" rows="20" autofocus class="form-control">{ "name": "just-a-demo",
  "version": "0.1.2",
  "description": "blahblahblah",
  "main": "test.js",
  "scripts": { "test": "echo \"Error: no test specified\" && exit 1" },
  "author": "John Doe <whoever@google.com>",
  "license": "BSD-2-Clause" }
 
// we also support
// comments! :)</textarea></div></div></form></div></div></div></body></head><body><a href="https://github.com/rlidwka/jju"><img src="https://github-camo.global.ssl.fastly.net/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" class="forkme"></a></body></html>